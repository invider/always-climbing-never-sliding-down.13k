<!DOCTYPE html>
<html>
    <head>
        <title>Liminal</title>

        <style>
            * {
                margin: 0;
                padding: 0;
            }
            body {
                overflow: hidden;
                background-color: #000000;
            }
            canvas {
                border: 0px;
                position: absolute;
                display: block;
            }
        </style>

        <script id="v-shader" type="x-shader/x-vertex">
            uniform mat4 mMatrix;
            uniform mat4 nMatrix;
            uniform mat4 vMatrix;
            uniform mat4 pMatrix;

            attribute vec3 aVertexPosition;
            attribute vec3 aVertexNormal;
            //attribute vec3 aVertexColor;

            //varying vec3 vColor;
            varying vec3 vLight;

            void main(void) {
                // setup lights
                vec3 ambientLight = vec3(.4, .4, .4);
                vec3 diffuseLightColor = vec3(.5, .5, .5);
                vec3 directionalLightPosition = normalize( vec3(1, 1, 1) );

                vec3 worldNormal = vec3( nMatrix * vec4(aVertexNormal, 0) );
                float diffuseLightFactor = max( dot(worldNormal, directionalLightPosition), 0.0 );

                //gl_Position = pMatrix * vMatrix * mMatrix * vec4(aVertexPosition, 1.0);
                gl_Position = pMatrix * vMatrix * mMatrix * vec4(aVertexPosition, 1.0);
                //vColor = aVertexColor;
                vLight = ambientLight + (diffuseLightColor * diffuseLightFactor);
            }
        </script>

        <script id="f-shader" type="x-shader/x-fragment">
            precision mediump float;
            //varying vec3 vColor;
            varying vec3 vLight;

            void main(void) {
                vec4 color = vec4( vec3(0.45, .4, .47) * vLight, 1.0);
                gl_FragColor = color;
                //gl_FragColor = vec4(vColor, 1.0);
            }
        </script>

        <script src="js/math.js"></script>
        <script src="js/util.js"></script>
        <script src="js/geo.js"></script>

        <script src="js/dna/Frame.js"></script>
        <script src="js/dna/Camera.js"></script>
        <script src="js/dna/Cube.js"></script>
        <script src="js/dna/Mesh.js"></script>

        <script src="js/env.js"></script>
        <script src="js/trap.js"></script>
        <script src="js/setup.js"></script>
        <script src="js/scene.js"></script>
        <script src="js/cycle.js"></script>

        <script src="box/box1.js"></script>
    </head>

    <body>
        <canvas id="canvas"></canvas>
        <canvas id="hcanvas"></canvas>
    </body>
</html>
